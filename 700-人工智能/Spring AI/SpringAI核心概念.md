+ Spring AI 核心概念：https://docs.spring.io/spring-ai/reference/concepts.html


# 1 ​**模型（Models）​**​

AI 模型是通过学习大规模数据集中的模式和洞察来处理和生成信息的算法，常模拟人类认知功能。不同类型的模型适用于特定场景：

- ​**文本/图像/音频模型**​：Spring AI 当前支持处理文本、图像和音频输入输出的模型。
- ​**嵌入模型（Embeddings）​**​：将文本转换为数值向量（如 "Take a deep breath and work on this step by step" 是有效提示的示例）。GPT 等模型的预训练特性（GPT 中的 "P" 表示 Pre-trained）使其成为通用开发工具。

---

# 2 ​**提示词（Prompts）​**​

提示是引导 AI 模型生成特定输出的文本输入基础：

- ​**角色定义**​：如 ChatGPT 的 API 中包含 `system`（设定上下文）和 `user`（用户输入）角色。
- ​**提示工程（Prompt Engineering）​**​：通过艺术与科学结合优化提示，例如研究显示以 "深呼吸并逐步思考" 开头的提示更有效。

---

# 3 ​**提示模板（Prompt Templates）​**​

使用模板引擎（如 StringTemplate）构建动态提示：

- 示例模板：`Tell me a {adjective} joke about {content}.`
- 在 Spring AI 中，模型对象（如 `Map`）填充占位符，生成最终提示字符串。

---

# 4 ​**嵌入（Embeddings）​**​

- 将文本/图像/视频转换为浮点数数组（向量），用于语义相似度计算。
- 在 RAG（检索增强生成）中，文档被编码为向量存入数据库，通过语义距离匹配相关内容。

---

# 5 ​**标记（Tokens）​**​

- 模型处理的最小单位（1 英文词 ≈ 0.75 个 Token）。
- ​**Token 经济学**​：输入输出均消耗 Token，模型有上下文窗口限制（如 GPT-4 的 8K/16K/32K Token）。

---

# 6 ​**结构化输出（Structured Output）​**​

- 默认输出为纯文本，需通过精心设计的提示提取结构化数据（如 JSON）。
- Spring AI 提供 Evaluator API 辅助评估响应质量（相关性、连贯性等）。

---

# 7 ​**数据与 API 集成**​

三种定制模型知识的方法：

1. ​**微调（Fine Tuning）​**​：调整模型内部权重（需机器学习专业知识）。
2. ​**提示填充（Prompt Stuffing/RAG）​**​：将数据嵌入提示，通过向量数据库检索相关内容。
3. ​**工具调用（Tool Calling）​**​：注册自定义服务（如数据库查询 API），模型通过工具调用获取实时数据。

---

# 8 ​**检索增强生成（RAG）​**​

- ​**流程**​：从文档提取数据 → 转换为嵌入向量存入数据库 → 用户提问时检索相关文档片段作为上下文。
- ​**关键步骤**​：语义分块（避免破坏段落/代码结构）、Token 限制下的内容分割。

---

# 9 ​**工具调用（Tool Calling）​**​

- 注册 `@Tool` 注解的方法作为外部服务，模型通过 JSON Schema 定义参数。
- 应用接收工具调用请求 → 执行服务 → 返回结果给模型生成最终响应。

---

# 10 ​**评估 AI 响应**​

- 使用模型自身评估生成内容的相关性、事实准确性（如提示模型判断回答是否符合数据）。
- 结合向量数据库中的信息增强评估效果。

---

如需进一步了解具体实现（如 RAG 工作流或 Tool Calling 代码示例），请参考 Spring AI 官方文档。