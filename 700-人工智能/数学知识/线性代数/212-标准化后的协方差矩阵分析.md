我们通过**3个案例**演示“标准化后数据的协方差矩阵”变化，并解释其与原始协方差矩阵的关系。标准化（Z-score）的定义是：

$$
X' = \frac{X - \mu_X}{\sigma_X}, \quad Y' = \frac{Y - \mu_Y}{\sigma_Y}, \quad Z' = \frac{Z - \mu_Z}{\sigma_Z}
$$

其中 $\mu$ 是均值，$\sigma$ 是标准差。标准化后，变量的均值为0，标准差为1，消除了量纲影响。此时，协方差矩阵会转化为**相关系数矩阵**​（对角线为1，非对角线为变量间的相关系数）。

---

# 1 ​**案例1：学习时间（X）与错误率（Y）负相关（标准化后）​**​

​**原始数据**​（5组）：

|学习时间（X）|错误率（Y）|
|---|---|
|10|15|
|20|10|
|30|5|
|40|2|
|50|1|

## 1.1 ​**步骤1：计算原始均值和标准差**​

$$
\mu_X = 30, \quad \sigma_X = \sqrt{250} \approx 15.81 \\
\mu_Y = 6.6, \quad \sigma_Y = \sqrt{33.56} \approx 5.79
$$

## 1.2 ​**步骤2：标准化数据**​

标准化后数据 $X' = (X-\mu_X)/\sigma_X$，$Y' = (Y-\mu_Y)/\sigma_Y$：

| 样本  | $X'$                    | $Y'$                   |
| --- | ----------------------- | ---------------------- |
| 1   | $(10-30)/15.81 ≈ -1.26$ | $(15-6.6)/5.79 ≈ 1.45$ |
| 2   | $(20-30)/15.81 ≈ -0.63$ | $(10-6.6)/5.79 ≈ 0.59$ |
| 3   | $(30-30)/15.81 = 0$     | $(5-6.6)/5.79 ≈ -0.28$ |
| 4   | $(40-30)/15.81 ≈ 0.63$  | $(2-6.6)/5.79 ≈ -0.79$ |
| 5   | $(50-30)/15.81 ≈ 1.26$  | $(1-6.6)/5.79 ≈ -0.97$ |

## 1.3 ​**步骤3：计算标准化后的协方差矩阵**​

标准化后，协方差矩阵的对角线元素为1（因标准差为1），非对角线元素为相关系数 $r$。

### 1.3.1 计算相关系数 $r_{XY}$：

$$
r_{XY} = \frac{\text{Cov}(X,Y)}{\sigma_X \sigma_Y} = \frac{-90}{15.81 \times 5.79} \approx -1.0
$$

（注：原始协方差为-90，标准化后协方差等于相关系数，此处因数据完全线性相关，$r=-1$。）

## 1.4 ​**标准化后协方差矩阵**​：

$$
\Sigma_{\text{标准化}} = \begin{bmatrix}
1 & -1 \\
-1 & 1
\end{bmatrix}
$$

## 1.5 ​**结论**​

标准化后，协方差矩阵的对角线为1（变量自身方差为1），非对角线为相关系数（此处 $r=-1$，完全负相关）。

---

# 2 ​**案例2：身高（X）、体重（Y）、鞋码（Z）正相关（标准化后）​**​

​**原始数据**​（5组）：

|身高（X）|体重（Y）|鞋码（Z）|
|---|---|---|
|160|50|38|
|170|60|40|
|180|70|42|
|165|55|39|
|175|65|41|

## 2.1 ​**步骤1：计算原始均值和标准差**​

$$
\mu_X = 170, \quad \sigma_X = \sqrt{61.25} \approx 7.826 \\
\mu_Y = 60, \quad \sigma_Y = \sqrt{61.25} \approx 7.826 \\
\mu_Z = 40, \quad \sigma_Z = \sqrt{2.5} \approx 1.581
$$

## 2.2 ​**步骤2：标准化数据**​

标准化后数据 $X' = (X-170)/7.826$，$Y' = (Y-60)/7.826$，$Z' = (Z-40)/1.581$：

|样本|$X'$|$Y'$|$Z'$|
|---|---|---|---|
|1|$(160-170)/7.826 ≈ -1.28$|$(50-60)/7.826 ≈ -1.28$|$(38-40)/1.581 ≈ -1.27$|
|2|$(170-170)/7.826 = 0$|$(60-60)/7.826 = 0$|$(40-40)/1.581 = 0$|
|3|$(180-170)/7.826 ≈ 1.28$|$(70-60)/7.826 ≈ 1.28$|$(42-40)/1.581 ≈ 1.27$|
|4|$(165-170)/7.826 ≈ -0.64$|$(55-60)/7.826 ≈ -0.64$|$(39-40)/1.581 ≈ -0.63$|
|5|$(175-170)/7.826 ≈ 0.64$|$(65-60)/7.826 ≈ 0.64$|$(41-40)/1.581 ≈ 0.63$|

## 2.3 ​**步骤3：计算标准化后的协方差矩阵**​

标准化后，协方差矩阵的对角线为1，非对角线为各变量间的相关系数。

### 2.3.1 计算相关系数 $r_{XY}$：

原始协方差 $\text{Cov}(X,Y)=61.25$，因此：

$$
r_{XY} = \frac{61.25}{7.826 \times 7.826} \approx 1.0
$$

同理，$r_{XZ} = r_{YZ} \approx 1.0$（因原始数据中身高、体重、鞋码几乎完全线性相关）。

## 2.4 ​**标准化后协方差矩阵**​：

$$
\Sigma_{\text{标准化}} \approx \begin{bmatrix}
1 & 1 & 1 \\
1 & 1 & 1 \\
1 & 1 & 1
\end{bmatrix}
$$

## 2.5 ​**结论**​

标准化后，协方差矩阵的对角线为1（变量自身方差为1），非对角线为相关系数（此处 $r \approx 1$，完全正相关）。

---

# 3 ​**案例3：温度（X）、降雨量（Y）、股票涨幅（Z）无关（标准化后）​**​

​**原始数据**​（5组）：

|温度（X）|降雨量（Y）|股票涨幅（Z）|
|---|---|---|
|25|0|1.2|
|28|2|-0.5|
|22|5|0.8|
|26|1|2.1|
|30|3|-1.0|

## 3.1 ​**步骤1：计算原始均值和标准差**​

$$
\mu_X \approx 26.2, \quad \sigma_X \approx \sqrt{6.69} \approx 2.59 \\
\mu_Y \approx 2.2, \quad \sigma_Y \approx \sqrt{3.46} \approx 1.86 \\
\mu_Z \approx 0.52, \quad \sigma_Z \approx \sqrt{1.597} \approx 1.26
$$

## 3.2 ​**步骤2：标准化数据**​

标准化后数据 $X' = (X-26.2)/2.59$，$Y' = (Y-2.2)/1.86$，$Z' = (Z-0.52)/1.26$：

|样本|$X'$|$Y'$|$Z'$|
|---|---|---|---|
|1|$(25-26.2)/2.59 ≈ -0.46$|$(0-2.2)/1.86 ≈ -1.18$|$(1.2-0.52)/1.26 ≈ 0.54$|
|2|$(28-26.2)/2.59 ≈ 0.70$|$(2-2.2)/1.86 ≈ -0.11$|$(-0.5-0.52)/1.26 ≈ -0.81$|
|3|$(22-26.2)/2.59 ≈ -1.62$|$(5-2.2)/1.86 ≈ 1.45$|$(0.8-0.52)/1.26 ≈ 0.22$|
|4|$(26-26.2)/2.59 ≈ -0.08$|$(1-2.2)/1.86 ≈ -0.65$|$(2.1-0.52)/1.26 ≈ 1.26$|
|5|$(30-26.2)/2.59 ≈ 1.47$|$(3-2.2)/1.86 ≈ 0.43$|$(-1.0-0.52)/1.26 ≈ -1.21$|

## 3.3 ​**步骤3：计算标准化后的协方差矩阵**​

标准化后，协方差矩阵的对角线为1，非对角线为相关系数（理论上接近0，因变量无关）。

## 3.4 ​**标准化后协方差矩阵（近似）​**​：

$$
\Sigma_{\text{标准化}} \approx \begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$

（注：实际计算中因样本量小，非对角线可能有微小波动，但接近0。）

## 3.5 ​**结论**​

标准化后，协方差矩阵变为**单位矩阵**​（对角线为1，非对角线接近0），反映变量间无线性关系。

---

# 4 ​**总结：标准化对协方差矩阵的影响**​

标准化（Z-score）的核心作用是**消除量纲影响**，使协方差矩阵转化为**相关系数矩阵**，其特点如下：

1. ​**对角线元素**​：所有变量的方差被标准化为1（因 $X'$ 的标准差为1）。
2. ​**非对角线元素**​：等于原始变量间的**相关系数**​（$r_{XY} = \text{Cov}(X',Y')$），反映变量间的线性相关强度和方向。
3. ​**与原始协方差矩阵的关系**​：标准化后的协方差矩阵与原始协方差矩阵的相似性由变量的量纲决定。若原始变量量纲差异大（如身高[cm]与体重[kg]），标准化后能更客观反映线性关系。

# 5 ​**PCA中标准化的意义**​

PCA通过协方差矩阵的特征分解寻找主成分，而协方差矩阵受量纲影响（例如，若一个变量的单位是“米”，另一个是“毫米”，前者的方差会远大于后者，导致PCA优先选择前者）。标准化后，协方差矩阵变为相关系数矩阵，各变量的重要性基于**线性相关程度**而非量纲，确保PCA结果的合理性。

例如，在案例2中，原始协方差矩阵的身高和体重的协方差（61.25）远大于身高和鞋码的协方差（12.5），可能让人误以为身高与体重的关系更重要；但标准化后，两者的相关系数均为1，说明它们的线性关系强度相同（只是原始量纲不同导致协方差差异）。